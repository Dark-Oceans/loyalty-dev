<!DOCTYPE html>
 <html lang="en">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>Coinnect Dev</title>
   <script src="https://sdk.minepi.com/pi-sdk.js"></script>
   <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" />
   <style>
     body {
       margin: 0;
       font-family: 'Inter', sans-serif;
       background-color: #0e1a1c;
       color: #fff;
     }
     .screen {
       display: none;
     }
     .nav-bar {
      display: none;
      justify-content: space-around;
      align-items: center;
      background: #112021;
      padding-bottom: 1.5rem;
      height: 80px;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }
    .nav-bar button {
      background: none;
      border: none;
      color: #ffb84d;
      font-size: 1.5rem;
      cursor: pointer;
    }
    .nav-bar svg {
      width: 24px;
      height: 24px;
      stroke: #ffb84d;
      fill: none;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
    }
    #map-screen #map {
      height: 100%;
      width: 100%;
     max-width: 100vw;
     overflow-x: hidden;
      position: absolute;
     top: 0;
     left: 0;
     right: 0;
     bottom: 0;
     margin: 0;
     padding: 0;
      filter: grayscale(1) brightness(0.6);
    }
    .map-header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 175px; /* adjust this value to make it deeper */
  padding: padding: 1.5rem 1.5rem 1.5rem;
  background: linear-gradient(to bottom,
  rgba(14,26,28,1) 0%,
  rgba(14,26,28,1) 40%,
  rgba(14,26,28,0) 100%
);
  z-index: 10;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

    .map-header h1 {
      font-size: 1.5rem;
      color: #fff;
      margin: 1.0rem;
     line-height: 1.2;
    }

    .map-header p {
      color: #aaa;
      font-size: 0.875rem;
      margin: 0.25rem 0 0;
    }
 .map-search-icon {
  position: absolute;
  top: 1.25rem;
  right: 1.5rem;
  background: none;
  border: none;
  z-index: 11;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
    .map-search-icon svg {
      width: 24px;
      height: 24px;
      fill: #ffb84d;
    }
    .map-search-box {
  position: absolute;
  top: 70px;
  left: 1rem;
  right: 1rem;
  z-index: 10;
  display: none;
}
.map-search-box input {
  width: 100%;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  box-sizing: border-box;
}
    .map-locate-btn {
      position: absolute;
      bottom: 120px;
      left: 50%;
      transform: translateX(-50%);
      background: #334b4e;
      color: #ffb84d;
      border: none;
      padding: 0.5rem 0.5rem;
      border-radius: 20px;
      font-size: 0.875rem;
      z-index: 10;
      cursor: pointer;
    }
    header, footer {
       text-align: center;
       padding: 1rem;
     }
     .screen {
       padding: 1rem;
       max-width: 600px;
       margin: 0 auto;
     }
     .hero-image {
       width: 100%;
       height: 100vh;
       background: url('https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?fit=crop&w=800&q=80') center center / cover no-repeat;
       position: relative;
     }
     .hero-overlay {
       position: absolute;
       top: 0; left: 0; right: 0; bottom: 0;
       background: linear-gradient(to bottom, rgba(14,26,28,0.1), #0e1a1c);
     }
     .hero-content {
       position: absolute;
       bottom: 80px;
       left: 20px;
       z-index: 2;
     }
     .hero-content h1 {
       font-size: 2.5rem;
       margin: 0;
       color: #fff;
     }
     .hero-content p {
       color: #ffb84d;
       font-size: 1rem;
     }
     .hero-content button {
       margin-top: 1rem;
       padding: 0.75rem 1.5rem;
       background: #ffb84d;
       color: #000;
       border: none;
       border-radius: 8px;
       cursor: pointer;
       font-weight: 600;
     }
     .hero-logo {
       position: absolute;
       top: 20px;
       right: 20px;
       width: 50px;
       height: 50px;
       z-index: 3;
     }
     .input-field {
       position: relative;
       margin-bottom: 1.5rem;
       padding: 0 1rem;
     }
     .input-field input {
       width: 100%;
       padding: 0.75rem 0.75rem 0.5rem 2.5rem;
       background: transparent;
       border: none;
       border-bottom: 1px solid #ffb84d;
       border-radius: 0;
       color: #fff;
       font-size: 1rem;
     }
     .input-field svg {
       position: absolute;
       top: 50%;
       left: 1.5rem;
       transform: translateY(-50%);
       width: 20px;
       height: 20px;
       fill: #ffb84d;
     }
    
      #profile-screen {
  display: none;
  background-color: #0e1a1c;
  color: #fff;
  font-family: 'Inter', sans-serif;
}
#profile-screen .profile-header {
  position: relative;
  width: 100%;
  height: 50vh;
  background-size: cover;
  background-position: center;
}
#profile-screen .profile-header::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: linear-gradient(to bottom, rgba(0,0,0,0.2), #0e1a1c);
}
#profile-screen .profile-info {
  position: relative;
  padding: 1.5rem 1rem;
  max-width: 600px;
  margin: 0 auto;
  z-index: 2;
}
#profile-screen .profile-title {
  font-size: 2rem;
  font-weight: bold;
  margin: 0;
}

#profile-screen .profile-location {
  color: #ccc;
  font-size: 0.9rem;
  margin-top: 0.25rem;
}
#profile-screen .rating-badge {
  background: #334b4e;
  color: #ffb84d;
  padding: 0.2rem 0.5rem;
  border-radius: 12px;
  font-size: 0.9rem;
  display: inline-block;
  margin-bottom: 0.5rem;
}
#profile-screen .profile-description {
  font-size: 0.95rem;
  line-height: 1.5;
  color: #ccc;
  margin-top: 1rem;
}
#profile-screen .btn-primary {
  background: #ffb84d;
  color: #000;
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: 12px;
  font-weight: bold;
  margin-top: 2rem;
  cursor: pointer;
  width: 100%;
  font-size: 1rem;
}
#rewards-section {
  padding: 1rem;
}   
.profile-tab {
  background: none;
  border: none;
  color: #aaa;
  font-weight: bold;
  font-size: 1rem;
  cursor: pointer;
  transition: color 0.2s;
}

.profile-tab.active-tab {
  color: #ffb84d;
}

   </style>
 </head>
 <body>
   <div id="welcome-screen" class="hero-image">
     <div class="hero-overlay"></div>
     <img src="assets/images/coinnect-logo.png" alt="Coinnect Logo" class="hero-logo" />
     <div class="hero-content">
       <h1>Welcome to Coinnect.- DEV 1.75</h1>
       <p>Rewards powered by Pi</p>
       <button id="continue-btn">Continue</button>
     </div>
   </div>
 
   <!-- Login Screen -->
 <div id="login-screen" class="screen" style="margin: 0; padding: 0;">
   <div style="position: relative; height: 33vh; width: 100%; background: url('https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?fit=crop&w=800&q=80') center center / cover no-repeat; margin: 0; padding: 0;">
     <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to bottom, rgba(14,26,28,0.3), #0e1a1c);"></div>
     <button onclick="showScreen('welcome-screen')" style="position: absolute; top: 1rem; left: 1rem; background: none; border: none; color: #fff; font-size: 1.5rem; z-index: 2;">‚Üê</button>
   </div>
   <div style="padding: 1rem; max-width: 600px; margin: 0 auto;">
     <h2 style="color: #fff; margin-top: 2rem;">Login</h2>
     <div style="margin-top: 1.5rem;">
       <div style="position: relative; margin-bottom: 1.5rem;">
         <svg viewBox="0 0 24 24" style="position: absolute; top: 50%; left: 0.75rem; transform: translateY(-50%); width: 20px; height: 20px; fill: #ffb84d;"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
         <input type="text" placeholder="Email" style="width: 100%; padding: 0.75rem 0.75rem 0.5rem 2.5rem; background: transparent; border: none; border-bottom: 1px solid #ffb84d; color: #fff; font-size: 1rem;">
       </div>
       <div style="position: relative; margin-bottom: 1.5rem;">
         <svg viewBox="0 0 24 24" style="position: absolute; top: 50%; left: 0.75rem; transform: translateY(-50%); width: 20px; height: 20px; fill: #ffb84d;"><path d="M12 17a2 2 0 0 0 2-2v-3a2 2 0 0 0-4 0v3a2 2 0 0 0 2 2zm6-9h-1V6a5 5 0 0 0-10 0v2H6c-1.1 0-2 .9-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10c0-1.1-.9-2-2-2z"/></svg>
         <input type="password" placeholder="Password" style="width: 100%; padding: 0.75rem 0.75rem 0.5rem 2.5rem; background: transparent; border: none; border-bottom: 1px solid #ffb84d; color: #fff; font-size: 1rem;">
         <a href="#" style="position: absolute; right: 0; top: 50%; transform: translateY(-50%); color: #ffb84d; font-size: 0.8rem; text-decoration: none;">Forgot?</a>
       </div>
       <button onclick="showDirectoryFromLogin()" style="width: 100%; background:#ffb84d; color:#000; padding:0.75rem; border:none; border-radius:12px; font-weight:bold;">Login</button>
     </div>
 
     <p style="text-align: center; color: #888; margin: 1.5rem 0 0.5rem;">Or Login With</p>
     <div style="display: flex; justify-content: center; gap: 1rem;">
       <button style="background: #1a2d2f; border: none; border-radius: 8px; padding: 0.75rem;"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/apple.svg" alt="Apple" style="width: 20px; height: 20px;"></button>
       <button style="background: #1a2d2f; border: none; border-radius: 8px; padding: 0.75rem;"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/google.svg" alt="Google" style="width: 20px; height: 20px;"></button>
       <button style="background: #1a2d2f; border: none; border-radius: 8px; padding: 0.75rem;"><img src="https://cdn.jsdelivr.net/npm/simple-icons@v7/icons/facebook.svg" alt="Facebook" style="width: 20px; height: 20px;"></button>
     </div>
 
    <p style="text-align: center; color: #888; font-size: 0.85rem; margin-top: 2rem;"> New User? <a href="#" onclick="showScreen('register-screen'); return false;" style="color: #ffb84d; text-decoration: none;">Register Here</a></p>
 
   </div>
 </div>

<!-- Register Screen -->
<div id="register-screen" class="screen" style="margin: 0; padding: 0; display: none;">
  <div style="padding: 1rem; max-width: 600px; margin: 1rem auto 2rem auto; box-sizing: border-box;">
    <h2 style="color: #fff; margin-top: 1rem;">Register</h2>
    <p style="color: #ccc; margin: 1rem 0 2rem; font-size: 0.95rem;">Thanks for logging in with your Pi credentials! Complete your profile to personalise your Coinnect experience.</p>

    <form id="register-form" onsubmit="return saveProfileData()">
      <div style="margin-bottom: 1.25rem;">
        <label style="color: #ccc; font-size: 0.9rem;">Full Name</label>
        <input id="reg-name" type="text" placeholder="Full Name" required style="width: 100%; box-sizing: border-box; padding: 0.75rem 1rem; background: transparent; border: 1px solid #ffb84d; border-radius: 8px; color: #fff; font-size: 1rem;">
      </div>
      <div style="margin-bottom: 1.25rem;">
        <label style="color: #ccc; font-size: 0.9rem;">Birthday</label>
        <input id="reg-birthday" type="date" required style="width: 100%; box-sizing: border-box; padding: 0.75rem 1rem; background: transparent; border: 1px solid #ffb84d; border-radius: 8px; color: #fff; font-size: 1rem;">
      </div>
      <div style="margin-bottom: 1.25rem;">
        <label style="color: #ccc; font-size: 0.9rem;">Gender</label>
        <select id="reg-gender" required style="width: 100%; box-sizing: border-box; padding: 0.75rem 1rem; background: #1a2d2f; border: 1px solid #ffb84d; border-radius: 8px; color: #fff; font-size: 1rem;">
          <option value="" disabled selected>Gender</option>
          <option value="female">Female</option>
          <option value="male">Male</option>
          <option value="nonbinary">Non-binary</option>
          <option value="prefer-not">Prefer not to say</option>
        </select>
      </div>
      <div style="margin-bottom: 1.25rem;">
        <label style="color: #ccc; font-size: 0.9rem;">Location</label>
        <input id="reg-location" type="text" placeholder="City / Location" required style="width: 100%; box-sizing: border-box; padding: 0.75rem 1rem; background: transparent; border: 1px solid #ffb84d; border-radius: 8px; color: #fff; font-size: 1rem;">
      </div>
      <div style="margin-bottom: 1.25rem;">
        <label style="color: #ccc; font-size: 0.9rem;">Favourite Categories</label>
        <input id="reg-categories" type="text" placeholder="e.g. Coffee, Fitness, Wellness" required style="width: 100%; box-sizing: border-box; padding: 0.75rem 1rem; background: transparent; border: 1px solid #ffb84d; border-radius: 8px; color: #fff; font-size: 1rem;">
      </div>
      <div style="margin-bottom: 2rem;">
        <label style="color: #ccc; font-size: 0.9rem;">
          <input id="reg-consent" type="checkbox" style="margin-right: 0.5rem;"> I agree to receive offers and updates from Coinnect
        </label>
      </div>

      
    </form>
  </div>
</div>

<script>
  function saveProfileData() {
    const name = document.getElementById('reg-name');
    const birthday = document.getElementById('reg-birthday');
    const gender = document.getElementById('reg-gender');
    const location = document.getElementById('reg-location');
    const categories = document.getElementById('reg-categories');

    const profile = {
      name: name.value.trim(),
      birthday: birthday.value,
      gender: gender.value,
      location: location.value.trim(),
      categories: categories.value.trim(),
      consent: document.getElementById('reg-consent').checked
    };

    let hasError = false;
    [name, birthday, gender, location, categories].forEach(field => {
      if (!field.value.trim()) {
        field.style.borderColor = 'red';
        hasError = true;
      } else {
        field.style.borderColor = '#ffb84d';
      }
    });

    if (hasError) {
      alert('Please complete all required fields.');
      return false;
    }

    localStorage.setItem('coinnectProfile', JSON.stringify(profile));
    showScreen('dashboard-screen');
    return false;
  }

  window.addEventListener('DOMContentLoaded', () => {
    const saved = localStorage.getItem('coinnectProfile');
    if (saved) {
      const profile = JSON.parse(saved);
      document.getElementById('reg-name').value = profile.name || '';
      document.getElementById('reg-birthday').value = profile.birthday || '';
      document.getElementById('reg-gender').value = profile.gender || '';
      document.getElementById('reg-location').value = profile.location || '';
      document.getElementById('reg-categories').value = profile.categories || '';
      document.getElementById('reg-consent').checked = profile.consent || false;

      const profileCard = document.querySelector('#dashboard-screen h2');
      const profileLocation = document.querySelector('#dashboard-screen p');
      if (profileCard && profile.name) profileCard.textContent = profile.name;
      if (profileLocation && profile.location) profileLocation.textContent = profile.location;
    }
  });
</script>




<!-- User Profile Screen (for existing users) -->
<div id="user-profile-screen" class="screen screen-bg" style="display: none; padding: 1.5rem; max-width: 600px; margin: 0 auto; color: white; font-family: sans-serif;">
  <button onclick="document.getElementById('user-profile-screen').style.display='none'; document.getElementById('dashboard-screen').style.display='block';" style="color:#ffb84d; font-size: 1.2rem; background:none; border:none; margin-bottom: 1rem;">‚Üê Back</button>
  <h1 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem;">Your Profile</h1>

  <div style="text-align: center; margin-bottom: 1.5rem;">
    <img id="profile-pic" src="assets/images/profile-pic.jpg" alt="Profile Picture" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 2px solid #ffb84d;">
    <div style="margin-top: 0.5rem;">
      <input type="file" id="profile-image-upload" accept="image/*" onchange="updateProfilePic(event)" style="color: #ccc; font-size: 0.9rem;">
    </div>
    <p id="file-error" style="color: red; font-size: 0.85rem; display: none;">Image must be under 1MB.</p>
  </div>

  <form id="user-profile-form" style="display: flex; flex-direction: column; gap: 1rem; padding-bottom: 5rem;">
    <input type="text" id="profile-username" value="@pi_user" style="padding: 0.75rem; border: 1px solid #ffb84d; background: transparent; border-radius: 8px; color: #fff;">
    <input type="text" id="profile-name" value="Jane Doe" style="padding: 0.75rem; border: 1px solid #ffb84d; background: transparent; border-radius: 8px; color: #fff;">
    <input type="date" id="profile-birthday" value="1990-01-01" style="padding: 0.75rem; border: 1px solid #ffb84d; background: transparent; border-radius: 8px; color: #fff;">
    <select id="profile-gender" style="padding: 0.75rem; border: 1px solid #ffb84d; background: #1a2d2f; border-radius: 8px; color: #fff;">
      <option>Female</option>
      <option>Male</option>
      <option>Non-binary</option>
      <option>Prefer not to say</option>
    </select>
    <input type="text" id="profile-location" value="London, UK" style="padding: 0.75rem; border: 1px solid #ffb84d; background: transparent; border-radius: 8px; color: #fff;">
    <input type="text" id="profile-categories" value="Coffee, Wellness" style="padding: 0.75rem; border: 1px solid #ffb84d; background: transparent; border-radius: 8px; color: #fff;">
    <label style="color: #ccc; font-size: 0.9rem;">
      <input type="checkbox" id="profile-consent" checked style="margin-right: 0.5rem;"> I agree to receive offers and updates from Coinnect
    </label>
    <button type="submit" style="margin-top: 1rem; background:#ffb84d; color:#000; padding:0.75rem; border:none; border-radius:12px; font-weight:bold;">Save Profile</button>
  </form>
</div>

<script>
  function updateProfilePic(event) {
    const file = event.target.files[0];
    const error = document.getElementById('file-error');

    if (file && file.type.startsWith('image/')) {
      if (file.size > 1024 * 1024) { // 1MB limit
        error.style.display = 'block';
        return;
      }

      error.style.display = 'none';
      const reader = new FileReader();
      reader.onload = function(e) {
        const img = document.getElementById('profile-pic');
        img.src = e.target.result;
        localStorage.setItem('coinnectProfilePic', e.target.result);

        const dashboardImg = document.getElementById('dashboard-profile-pic');
        if (dashboardImg) dashboardImg.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }
  }

  window.addEventListener('DOMContentLoaded', () => {
    const savedPic = localStorage.getItem('coinnectProfilePic');
    if (savedPic) {
      const img = document.getElementById('profile-pic');
      if (img) img.src = savedPic;

      const dashboardImg = document.getElementById('dashboard-profile-pic');
      if (dashboardImg) dashboardImg.src = savedPic;
    }
  });
</script>


  
 <style>
  .sort-btn {
    cursor: pointer;
    color: white;
  }
  .sort-btn.active {
    color: #ffb84d;
  }

  .nav-bar {
    display: flex;
    justify-content: space-around;
    background-color: #1a2d2f;
    padding: 0.5rem 0;
    border-top: 1px solid #334b4e;
    height: 48px;
  }

  .nav-bar button {
    background: none;
    border: none;
    padding: 0.25rem;
    cursor: pointer;
    transition: transform 0.1s ease, opacity 0.2s ease;
    opacity: 0.6;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .nav-bar button:active {
    transform: scale(0.9);
  }

  .nav-bar button.active {
    opacity: 1;
  }

  .nav-bar svg {
    width: 22px;
    height: 22px;
    fill: #ffb84d;
  }

  .dashboard-menu {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .dashboard-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1rem;
    background: #1a2d2f;
    color: white;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.3s;
  }

  .dashboard-item:hover {
    background: #26393c;
  }
</style>

<!-- Directory Screen -->
<div id="directory-screen" class="screen" style="display: none; font-family: sans-serif; color: white; background-color: #0e1a1c; position: relative; min-height: 100vh; overflow-y: auto;">

  <!-- Background fade image -->
  <div style="position: absolute; top: 0; left: 0; width: 100%; height: 200px; background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb') center/cover no-repeat; z-index: 0;"></div>
  <div style="position: absolute; top: 0; left: 0; width: 100%; height: 200px; background: linear-gradient(to bottom, rgba(14,26,28,0) 0%, #0e1a1c 100%); z-index: 1;"></div>

  <!-- Content -->
  <div style="position: relative; z-index: 2; padding: 1.5rem; padding-top: 4rem;">
    <h1 style="font-size: 1.75rem; font-weight: bold; margin-bottom: 1rem;">Retailer Directory</h1>

    <!-- Sort options -->
    <div id="sort-buttons" style="display: flex; gap: 1.5rem; font-size: 0.9rem; margin-bottom: 1rem;">
      <span onclick="setActiveSort(this, 'distance')" class="sort-btn" data-type="distance">Distance</span>
      <span onclick="setActiveSort(this, 'rating')" class="sort-btn" data-type="rating">Rating</span>
      <span onclick="setActiveSort(this, 'name')" class="sort-btn" data-type="name">Name</span>
    </div>

    <!-- Search Bar -->
    <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
      <input id="searchInput" type="text" placeholder="Search retailers..." oninput="renderRetailers()" style="flex: 1; padding: 0.75rem 1rem; border-radius: 12px; border: none; background-color: #1a2d2f; color: white;">
      <button style="background: #ffb84d; border: none; border-radius: 8px; padding: 0.6rem; cursor: pointer;">
        <svg fill="black" height="20" viewBox="0 0 24 24" width="20"><path d="M21 20l-5.6-5.6a7 7 0 1 0-1.4 1.4L20 21zM4 10a6 6 0 1 1 12 0 6 6 0 0 1-12 0z"/></svg>
      </button>
    </div>

    <!-- Listings info -->
    <div style="margin-bottom: 1.25rem;">
      <p style="color: #ccc; font-size: 0.9rem;">We have found <span id="listing-count">0</span>+ retailers for you.</p>
    </div>

    <!-- Retailer list -->
    <div id="retailer-list" style="display: flex; flex-direction: column; gap: 1.25rem;"></div>
  </div>
</div>

<style>
  .sort-btn {
    cursor: pointer;
    color: white;
  }
  .sort-btn.active {
    color: #ffb84d;
  }
</style>

<script>
  const retailers = [
    { name: "Moon Brew Caf√©", city: "London W1", rating: 4.8, image: "https://images.unsplash.com/photo-1600880292203-757bb62b4baf?auto=format&fit=crop&w=800&q=80", lat: 51.509865, lng: -0.118092 },
    { name: "DeFi Deli", city: "Bristol", rating: 4.6, image: "https://images.unsplash.com/photo-1525351484163-7529414344d8?auto=format&fit=crop&w=800&q=80", lat: 51.454514, lng: -2.587910 },
    { name: "Blockchain Bakery", city: "Manchester", rating: 4.9, image: "https://images.unsplash.com/photo-1586190848861-99aa4a171e90?auto=format&fit=crop&w=800&q=80", lat: 53.480759, lng: -2.242631 },
    { name: "Smart Sips", city: "Liverpool", rating: 4.7, image: "https://images.unsplash.com/photo-1507915135761-41a0a222c709?auto=format&fit=crop&w=800&q=80", lat: 53.408371, lng: -2.991573 },
    { name: "Cripto Crumbs", city: "Leeds", rating: 4.5, image: "https://images.unsplash.com/photo-1600891964599-f61ba0e24092?auto=format&fit=crop&w=800&q=80", lat: 53.800755, lng: -1.549077 }

  ];

  let userCoords = null;
  let bookmarks = JSON.parse(localStorage.getItem('bookmarkedRetailers') || '[]');

  function getDistance(lat1, lon1, lat2, lon2) {
    const R = 6371;
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLon = (lon2 - lon1) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(lat1 * Math.PI/180) * Math.cos(lat2 * Math.PI/180) * Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R * c;
  }

  function toggleBookmark(name) {
    if (bookmarks.includes(name)) {
      bookmarks = bookmarks.filter(n => n !== name);
    } else {
      bookmarks.push(name);
    }
    localStorage.setItem('bookmarkedRetailers', JSON.stringify(bookmarks));
    renderRetailers();
  }

  function renderRetailers() {
    const container = document.getElementById("retailer-list");
    const searchValue = document.getElementById("searchInput").value.toLowerCase();
    container.innerHTML = "";
    const filtered = retailers.filter(r => r.name.toLowerCase().includes(searchValue));
    document.getElementById("listing-count").textContent = filtered.length;

    filtered.forEach(retailer => {
      const distance = userCoords ? getDistance(userCoords.lat, userCoords.lng, retailer.lat, retailer.lng).toFixed(1) + " km" : "--";
      const isBookmarked = bookmarks.includes(retailer.name);

      const card = document.createElement("div");
      card.style = `
        background-color: transparent;
        border-radius: 16px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        background-image: url('${retailer.image}');
        background-size: cover;
        background-position: center;
        position: relative;
      `;

      card.innerHTML = `
        <div style="background: rgba(0, 0, 0, 0.6); padding: 1rem;">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 onclick="viewBusinessProfile()" style="font-size: 1rem; font-weight: bold; margin: 0; cursor: pointer;">${retailer.name}</h2>
            <button onclick="toggleBookmark('${retailer.name}')" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; min-width: 24px;">
              <svg fill="none" stroke="#ffb84d" stroke-width="2" width="24" height="24" viewBox="0 0 24 24">
                <path d="${isBookmarked ? 'M5 3h14a2 2 0 0 1 2 2v16l-7-5-7 5V5a2 2 0 0 1 2-2z' : 'M5 3h14a2 2 0 0 1 2 2v16l-7-5-7 5V5a2 2 0 0 1 2-2z'}" fill="${isBookmarked ? '#ffb84d' : 'none'}"/>
              </svg>
            </button>
          </div>
          <p style="margin: 0.2rem 0; color: #ccc; font-size: 0.85rem;">${retailer.city}</p>
          <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
            <span style="color: #ffb84d;">‚òÖ</span>
            <span style="color: #ffb84d; font-size: 0.95rem;">${retailer.rating}</span>
            <span style="color: #aaa; font-size: 0.8rem;">(${distance})</span>
            <button onclick="viewBusinessProfile()" style="margin-left: auto; background: none; border: none; cursor: pointer;">
              <svg fill="#ffb84d" width="24" height="24" viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
            </button>
          </div>
        </div>
      `;

      container.appendChild(card);
    });
  }

  function sortListings(type) {
    if (type === 'rating') {
      retailers.sort((a, b) => b.rating - a.rating);
    } else if (type === 'name') {
      retailers.sort((a, b) => a.name.localeCompare(b.name));
    } else if (type === 'distance' && userCoords) {
      retailers.sort((a, b) => getDistance(userCoords.lat, userCoords.lng, a.lat, a.lng) - getDistance(userCoords.lat, userCoords.lng, b.lat, b.lng));
    }
    renderRetailers();
  }

  function setActiveSort(element, type) {
    document.querySelectorAll(".sort-btn").forEach(btn => btn.classList.remove("active"));
    element.classList.add("active");
    sortListings(type);
  }

  function initDirectoryScreen() {
    const defaultType = userCoords ? 'distance' : 'rating';
    const defaultButton = document.querySelector(`.sort-btn[data-type="${defaultType}"]`);
    if (defaultButton) {
      setActiveSort(defaultButton, defaultType);
    } else {
      renderRetailers();
    }
  }

  window.addEventListener('load', () => {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(position => {
        userCoords = {
          lat: position.coords.latitude,
          lng: position.coords.longitude
        };
        initDirectoryScreen();
      }, () => {
        initDirectoryScreen();
      });
    } else {
      initDirectoryScreen();
    }
  });
</script>








<!-- Dashboard Screen -->
<div id="dashboard-screen" class="screen fade-screen" style="display: none; font-family: sans-serif; color: white; background-color: #0e1a1c; min-height: 100vh; padding: 1.5rem; max-width: 600px; margin: 0 auto;">
  <div style="display: flex; align-items: center; margin-bottom: 2rem;">
    <img id="dashboard-profile-img" src="assets/images/profile-pic.jpg" alt="User Photo" style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover; margin-right: 1rem;">
    <div>
      <h2 id="dashboard-username" style="margin: 0; font-size: 1.2rem;">User Name</h2>
      <p id="dashboard-location" style="margin: 0; color: #ccc; font-size: 0.85rem;">City, Country</p>
    </div>
  </div>

  <div class="dashboard-menu">
    <div class="dashboard-item" onclick="showScreen('user-profile-screen')">Your Profile <span style="font-size: 1.2rem;">‚Ä∫</span></div>
    <div class="dashboard-item" onclick="showScreen('rewards-screen')">Rewards <span style="font-size: 1.2rem;">‚Ä∫</span></div>
    <div class="dashboard-item" onclick="showScreen('favourites-screen')">Favourites <span style="font-size: 1.2rem;">‚Ä∫</span></div>
    <div class="dashboard-item" onclick="showScreen('reviews-screen')">Your Reviews <span style="font-size: 1.2rem;">‚Ä∫</span></div>
    <div class="dashboard-item" onclick="showScreen('settings-screen')">Settings <span style="font-size: 1.2rem;">‚Ä∫</span></div>
    <div class="dashboard-item" onclick="logout()">Logout <span style="font-size: 1.2rem;">‚Ä∫</span></div>
  </div>
</div>

<!-- Placeholder Pages -->
<div id="rewards-screen" class="screen fade-screen" style="display: none; padding: 1.5rem; color: white; background: #0e1a1c; min-height: 100vh;">
  <button onclick="showScreen('dashboard-screen')" style="color:#ffb84d; font-size: 1rem; background:none; border:none; margin-bottom: 1rem;">‚Üê Back</button>
  <h1>Rewards Page</h1>
  <p>This is the Rewards page content placeholder.</p>
</div>
<div id="favourites-screen" class="screen fade-screen" style="display: none; padding: 1.5rem; color: white; background: #0e1a1c; min-height: 100vh;">
  <button onclick="showScreen('dashboard-screen')" style="color:#ffb84d; font-size: 1rem; background:none; border:none; margin-bottom: 1rem;">‚Üê Back</button>
  <h1>Favourites</h1>
  <p>This is the Favourites page content placeholder.</p>
</div>
<div id="reviews-screen" class="screen fade-screen" style="display: none; padding: 1.5rem; color: white; background: #0e1a1c; min-height: 100vh;">
  <button onclick="showScreen('dashboard-screen')" style="color:#ffb84d; font-size: 1rem; background:none; border:none; margin-bottom: 1rem;">‚Üê Back</button>
  <h1>Your Reviews</h1>
  <p>This is the Reviews page content placeholder.</p>
</div>
<div id="settings-screen" class="screen fade-screen" style="display: none; padding: 1.5rem; color: white; background: #0e1a1c; min-height: 100vh;">
  <button onclick="showScreen('dashboard-screen')" style="color:#ffb84d; font-size: 1rem; background:none; border:none; margin-bottom: 1rem;">‚Üê Back</button>
  <h1>Settings</h1>
  <p>This is the Settings page content placeholder.</p>
</div>

<style>
  .sort-btn {
    cursor: pointer;
    color: white;
  }
  .sort-btn.active {
    color: #ffb84d;
  }
  .dashboard-menu {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .dashboard-item {
    padding: 1rem;
    background: #1a2d2f;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background 0.2s;
  }
  .dashboard-item:hover {
    background: #223b3d;
  }
  .fade-screen {
    opacity: 0;
    transition: opacity 0.3s ease;
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
  }
  .fade-screen.active {
    opacity: 1;
    position: relative;
  }
</style>

<script>
function logout() {
  document.querySelectorAll('.screen').forEach(screen => screen.classList.remove('active'));
  document.getElementById('login-screen').classList.add('active');
  document.getElementById('nav-container').style.display = 'none';
}

function showScreen(screenId) {
  document.querySelectorAll('.screen').forEach(screen => screen.classList.remove('active'));
  document.getElementById(screenId).classList.add('active');
  document.getElementById('nav-container').style.display = 'flex';
}

function syncDashboardProfile() {
  const profile = JSON.parse(localStorage.getItem('userProfile') || '{}');
  if (profile.name) document.getElementById('dashboard-username').innerText = profile.name;
  if (profile.location) document.getElementById('dashboard-location').innerText = profile.location;
  if (profile.image) document.getElementById('dashboard-profile-img').src = profile.image;
}

document.addEventListener("DOMContentLoaded", () => {
  syncDashboardProfile();
});
</script>

 
     



    <!-- More listings go here -->



<!-- Business Profile Screen -->
<div id="business-profile-screen" class="screen" style="display:none; background-color: #0e1a1c; color: #fff; font-family: 'Inter', sans-serif; padding: 0; margin: 0;">
  <div id="profile-header" style="position: relative; height: 50vh; background-size: cover; background-position: center; background-image: url('https://images.unsplash.com/photo-1511920170033-f8396924c348?fit=crop&w=1200&q=80');">
    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to bottom, rgba(0,0,0,0.3), #0e1a1c);"></div>
    <button onclick="showScreen('directory-screen')" style="position: absolute; top: 1rem; left: 1rem; background: none; border: none; color: #fff; font-size: 1.5rem; z-index: 2;">‚Üê</button>
    <button class="bookmark-icon" style="position: absolute; top: 1rem; right: 1rem; background: none; border: none; z-index: 2;">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="#ffb84d" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
      </svg>
    </button>
  </div>

  <div style="padding: 0 1.5rem 7rem; max-width: 600px; margin: 0 auto;">
    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
      <span id="profile-rating" style="background: #334b4e; color: #ffb84d; padding: 0.2rem 0.5rem; border-radius: 12px; font-size: 0.9rem;">‚òÖ 4.8</span>
    </div>
    <h2 id="profile-title" style="margin: 0; font-size: 2rem;">Moon Brew Caf√©</h2>
    <p id="profile-location" style="color: #ccc; font-size: 0.9rem; margin-top: 0.25rem;">Mayfair, London</p>

    <div style="display: flex; gap: 1rem; margin: 1.5rem 0;">
    <button class="profile-tab active-tab" data-tab="description" onclick="switchProfileTab('description')">Description</button>
    <button class="profile-tab" data-tab="reviews" onclick="switchProfileTab('reviews')">Reviews</button>
    <button class="profile-tab" data-tab="photos" onclick="switchProfileTab('photos')">Photos</button>


    </div>

    <div id="profile-description" style="font-size: 0.95rem; line-height: 1.5;">
      <p>
        Tucked away in the heart of London, this cozy coffee shop is a hidden gem for both caffeine lovers and Pi cryptocurrency enthusiasts. Not only do they serve up some of the best espresso in the city, 
       but they also accept Pi Coin as a form of payment‚Äîmaking it a modern and convenient spot for the tech-savvy crowd. The warm ambiance, friendly staff, and quality brews make it a place you‚Äôll want to return to again and again. 
       Plus, their loyalty program rewards you with a free drink after every ten purchases, adding even more value to your daily coffee fix.
      </p>
    </div>

    <button onclick="showScreen('map-screen')" style="margin-top: 2rem; width: 100%; background:#ffb84d; color:#000; padding:0.75rem; border:none; border-radius:12px; font-weight:bold; font-size: 1rem; cursor:pointer;">Take Me There</button>
  </div>
</div>

 <script>
  function switchProfileTab(tab) {
    const desc = document.getElementById("profile-description");

    // Clear all active tab styles
    document.querySelectorAll('.profile-tab').forEach(btn => {
      btn.classList.remove('active-tab');
    });

    // Highlight the clicked tab
    const activeButton = document.querySelector(`.profile-tab[data-tab="${tab}"]`);
    if (activeButton) {
      activeButton.classList.add('active-tab');
    }

    // Update content
    if (tab === 'description') {
      desc.innerHTML = `<p>Tucked away in the heart of London, this cozy coffee shop is a hidden gem for both caffeine lovers and Pi cryptocurrency enthusiasts. Not only do they serve up some of the best espresso in the city, 
      but they also accept Pi Coin as a form of payment‚Äîmaking it a modern and convenient spot for the tech-savvy crowd. The warm ambiance, friendly staff, and quality brews make it a place you‚Äôll want to return to again and again. 
      Plus, their loyalty program rewards you with a free drink after every ten purchases, adding even more value to your daily coffee fix.</p>`;
    } else if (tab === 'reviews') {
      desc.innerHTML = `<p>No reviews yet. Be the first to leave one!</p>`;
    } else if (tab === 'photos') {
      desc.innerHTML = `<p>No photos yet. Be the first and take some!</p>`;
    }
  }
</script>


<script>
  function loadProfileData({ name, location, rating, description, image }) {
    document.getElementById("profile-title").innerText = name;
    document.getElementById("profile-location").innerText = location;
    document.getElementById("profile-rating").innerText = `‚òÖ ${rating}`;
    document.getElementById("profile-description").innerHTML = `<p>${description}</p>`;
    document.getElementById("profile-header").style.backgroundImage = `url('${image}')`;
    
    // Show the profile screen!
    showScreen("business-profile-screen");
  }
</script>

 
 <!-- Map Screen -->
  <div id="map-screen" class="screen">
    <div class="map-header">
      <h1>Nearby Retailers</h1>
     
    </div>
   <button class="map-search-icon" onclick="toggleSearchBox()">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <circle cx="11" cy="11" r="8" stroke="#ffb84d" stroke-width="2" fill="none" />
    <line x1="21" y1="21" x2="16.65" y2="16.65" stroke="#ffb84d" stroke-width="2" />
  </svg>
</button>

   <div class="map-search-box" id="map-search-box" style="display: none;">
  <input type="text" placeholder="Search places...">
</div>

    <button class="map-locate-btn" onclick="centerMap()">From your location</button>
    <div id="map"></div>
  </div>

 

  <script>
    let map;

   function toggleSearchBox() {
  const box = document.getElementById('map-search-box');
  box.style.display = box.style.display === 'block' ? 'none' : 'block';
}

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: -6.2, lng: 106.8167 },
        zoom: 13,
        styles: [
          { elementType: 'geometry', stylers: [{ color: '#0e1a1c' }] },
          { elementType: 'labels.text.stroke', stylers: [{ color: '#0e1a1c' }] },
          { elementType: 'labels.text.fill', stylers: [{ color: '#ffffff' }] },
          { featureType: 'road', elementType: 'geometry', stylers: [{ color: '#112021' }] },
          { featureType: 'road', elementType: 'labels.text.fill', stylers: [{ color: '#ffffff' }] }
        ]
      });

      const markers = [
        { position: { lat: -6.2, lng: 106.8167 }, title: "Cafe A" },
        { position: { lat: -6.22, lng: 106.83 }, title: "Salon B" },
        { position: { lat: -6.21, lng: 106.81 }, title: "Store C" }
      ];

      markers.forEach(({ position, title }) => {
        new google.maps.Marker({
          position,
          map,
          title,
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            fillColor: "#ffb84d",
            fillOpacity: 1,
            strokeColor: "#fff",
            strokeWeight: 1,
            scale: 6
          }
        });
      });
    }

    function centerMap() {
      if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(
    (position) => {
      userCoords = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };
      initDirectoryScreen(); // ‚Üê sort after location available
    },
    () => {
      initDirectoryScreen(); // ‚Üê sort without location
    }
  );
} else {
  initDirectoryScreen(); // ‚Üê fallback without location

       renderRetailers();

}


    function showScreen(id) {
      const screens = ['welcome-screen', 'login-screen', 'dashboard-screen', 'directory-screen', 'map-screen', 'profile-screen'];
      screens.forEach(screenId => {
        const el = document.getElementById(screenId);
        if (el) el.style.display = 'none';
      });

      const target = document.getElementById(id);
      if (target) target.style.display = 'block';

      const nav = document.querySelector('.nav-bar');
      if (id === 'welcome-screen' || id === 'login-screen') {
        nav.style.display = 'none';
      } else {
        nav.style.display = 'flex';
      }
    }
     // Always render the list regardless of geolocation success
renderRetailers();

  </script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJu-bZUtQgeL_rsNzvfbHvqxTcEM6Qyek&callback=initMap"></script>
 
   <!-- Business Profile Screen -->
<div id="profile-screen" class="screen fade-screen" style="padding: 1rem; max-width: 600px; margin: 0 auto; display: none;">
  <h2 id="profile-title" style="color: #fff;">Business Name</h2>
  <p id="profile-description" style="color: #ccc;">Business description goes here.</p>
  <p id="profile-location" style="color: #aaa; font-size: 0.9rem;"></p>
  <p id="profile-rating" style="color: #ffb84d; font-size: 1rem;"></p>
  <button onclick="showScreen('directory-screen')" style="margin-top: 1rem; background: none; border: none; color: #ffb84d; cursor: pointer;">‚Üê Back to Directory</button>
</div>

<script>
function showScreen(screenId) {
  document.querySelectorAll('.screen').forEach(screen => screen.classList.remove('active'));
  const target = document.getElementById(screenId);
  if (target) target.classList.add('active');
  if (screenId !== 'login-screen' && screenId !== 'welcome-screen') {
    document.getElementById('nav-container').style.display = 'flex';
  } else {
    document.getElementById('nav-container').style.display = 'none';
  }
}

document.getElementById("continue-btn")?.addEventListener("click", () => {
  showScreen('login-screen');
});

document.getElementById("login-btn")?.addEventListener("click", () => {
  showScreen('dashboard-screen');
});
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJu-bZUtQgeL_rsNzvfbHvqxTcEM6Qyek&callback=initMap"></script>

   
 <script>
 document.getElementById("continue-btn").addEventListener("click", () => {
   document.getElementById('welcome-screen').style.display = 'none';
   document.getElementById('login-screen').style.display = 'block';
 });
 
 document.getElementById("login-btn").addEventListener("click", () => {
   document.getElementById('login-screen').style.display = 'none';
   document.getElementById('dashboard-screen').style.display = 'block';
   document.querySelector('.nav-bar').style.display = 'flex';
 });
 
 function toggleFavorite(button) {
   button.classList.toggle('active');
   button.innerHTML = button.classList.contains('active') ? '‚ù§Ô∏è' : 'ü§ç';
 }
 </script>
 
 <div id="login-screen" style="display:none;">
   <div style="position: relative; height: 33vh; background: url('https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?fit=crop&w=800&q=80') center center / cover no-repeat;">
     <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to bottom, rgba(14,26,28,0.1), #0e1a1c);"></div>
   </div>
   <div class="screen" style="padding: 1rem; max-width: 600px; margin: 0 auto;">
     <h2 style="color: #fff; margin-top: 2rem;">Login</h2>
     <p style="color: #ffb84d; font-size: 0.9rem; margin-bottom: 1.5rem;">Use your Pi credentials to log in</p>
     <div style="position: relative; margin-bottom: 1.5rem;">
       <svg viewBox="0 0 24 24" style="position: absolute; top: 50%; left: 0.75rem; transform: translateY(-50%); width: 20px; height: 20px; fill: #ffb84d;"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
       <input type="text" id="username" placeholder="Username" style="width: 100%; padding: 0.75rem 0.75rem 0.5rem 2.5rem; background: transparent; border: none; border-bottom: 1px solid #ffb84d; border-radius: 0; color: #fff; font-size: 1rem;">
     </div>
     <div style="position: relative; margin-bottom: 1.5rem;">
       <svg viewBox="0 0 24 24" style="position: absolute; top: 50%; left: 0.75rem; transform: translateY(-50%); width: 20px; height: 20px; fill: #ffb84d;"><path d="M12 17a2 2 0 0 0 2-2v-3a2 2 0 0 0-4 0v3a2 2 0 0 0 2 2zm6-9h-1V6a5 5 0 0 0-10 0v2H6c-1.1 0-2 .9-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V10c0-1.1-.9-2-2-2zM8 6a4 4 0 0 1 8 0v2H8V6z"/></svg>
       <input type="password" id="password" placeholder="Password" style="width: 100%; padding: 0.75rem 0.75rem 0.5rem 2.5rem; background: transparent; border: none; border-bottom: 1px solid #ffb84d; border-radius: 0; color: #fff; font-size: 1rem;">
     </div>
     <button id="login-btn" style="width: fit-content; background:#ffb84d; color:#000; padding:0.5rem 1.25rem; border:none; border-radius:8px; cursor:pointer; font-weight:bold;">Login</button>
   </div>
 </div>
 

<!-- Your screens go here -->

  <!-- Offers Screen -->
<div id="offers-screen" class="screen" style="display: none; font-family: sans-serif; color: white; background-color: #0e1a1c; position: relative; min-height: 100vh; overflow-y: auto;">

  <!-- Background fade image -->
  <div style="position: absolute; top: 0; left: 0; width: 100%; height: 200px; background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb') center/cover no-repeat; z-index: 0;"></div>
  <div style="position: absolute; top: 0; left: 0; width: 100%; height: 200px; background: linear-gradient(to bottom, rgba(14,26,28,0) 0%, #0e1a1c 100%); z-index: 1;"></div>

  <!-- Content -->
  <div style="position: relative; z-index: 2; padding: 1rem; padding-top: 4rem;">

    <h1 style="font-size: 1.75rem; font-weight: bold; margin-bottom: 1rem;">Latest Offers</h1>

    <!-- Sort options -->
    <div style="display: flex; gap: 1.5rem; font-size: 0.9rem; margin-bottom: 1.5rem;">
      <span onclick="sortOffers('distance')" style="color: #ffb84d; cursor: pointer;">Distance</span>
      <span onclick="sortOffers('value')" style="cursor: pointer;">Value</span>
      <span onclick="sortOffers('date')" style="cursor: pointer;">Date</span>
    </div>

    <!-- Offers list -->
    <div id="offers-list" style="display: flex; flex-direction: column; gap: 1.25rem;">
      <!-- Offers will be injected here -->
    </div>
  </div>
</div>

<script>
  const offers = [
    {
      business: "Moon Brew Coffee",
      image: "https://images.unsplash.com/photo-1600880292203-757bb62b4baf?fit=crop&w=80&q=80",
      daysAgo: 2,
      description: "Get 20% off your first drink.",
    },
    {
      business: "Moon Brew Coffee",
      image: "https://images.unsplash.com/photo-1600880292203-757bb62b4baf?fit=crop&w=80&q=80",
      daysAgo: 4,
      description: "Buy one get one free all week!",
    },
    {
      business: "Moon Brew Coffee",
      image: "https://images.unsplash.com/photo-1600880292203-757bb62b4baf?fit=crop&w=80&q=80",
      daysAgo: 6,
      description: "Free upgrade to large with any purchase.",
    },
  ];

  function renderOffers() {
    const container = document.getElementById("offers-list");
    container.innerHTML = "";

    offers.forEach(offer => {
      const offerCard = document.createElement("div");
      offerCard.style.display = "flex";
      offerCard.style.alignItems = "center";
      offerCard.style.justifyContent = "space-between";
      offerCard.style.background = "#1a2d2f";
      offerCard.style.padding = "1rem";
      offerCard.style.borderRadius = "12px";

      offerCard.innerHTML = `
        <div style="display: flex; gap: 1rem; align-items: center;">
          <img src="${offer.image}" alt="${offer.business}" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
          <div>
            <div style="font-weight: bold;">${offer.business}</div>
            <div style="font-size: 0.8rem; color: #aaa;">${offer.daysAgo} days ago</div>
            <div style="font-size: 0.85rem; color: #ccc;">${offer.description}</div>
          </div>
        </div>
        <button onclick="viewBusinessProfile()" style="background: #ffb84d; color: black; font-weight: bold; border: none; border-radius: 9999px; padding: 0.4rem 1rem; cursor: pointer;">REDEEM</button>
      `;

      container.appendChild(offerCard);
    });
  }

 function viewBusinessProfile(retailer) {
  document.querySelectorAll('.screen').forEach(screen => screen.style.display = 'none');

  if (retailer) {
    // If data is passed (e.g., from Directory or Offers)
    loadProfileData(retailer);
  }

  document.getElementById('business-profile-screen').style.display = 'block';
  document.getElementById('nav-container').style.display = 'flex';
}


  function sortOffers(type) {
    if (type === 'date') {
      offers.sort((a, b) => a.daysAgo - b.daysAgo); // recent first
    }
    // Add future sorting logic here for distance/value if needed
    renderOffers();
  }

  renderOffers();
</script>


   <!-- Rewards Section -->
<div id="rewards-section" style="display:none; padding: 20px; color: white; background-color: #0e1a1c; font-family: sans-serif;">
  <button onclick="goToDashboard()" style="color:#ffb84d; font-size: 24px; border:none; background:none;">‚Üê</button>
  <h1 style="color: #ffb84d;">REWARDS</h1>

  <div id="rewards-container"></div>
</div>

<!-- Redeem Section -->
<div id="redeem-section" style="display:none; padding: 20px; color: white; background-color: #0e1a1c; font-family: sans-serif;">
  <button onclick="goBackToRewards()" style="color:#ffb84d; font-size: 24px; border:none; background:none;">‚Üê</button>
  <h1 style="color: #ffb84d;">Redeem Reward</h1>
  <div style="width: 256px; height: 256px; background: white; color: black; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.5rem; border-radius: 12px; margin-top: 20px;">
    QR CODE
  </div>
<!-- Instructional Text -->
      <p className="text-sm text-gray-300 mt-4 text-center max-w-md">
        Show this QR code to the retailer to scan and redeem your rewards. Doesn‚Äôt that feel good? Start collecting for your next reward!
      </p>
</div>

<script>
  const rewardsData = [
    { name: "Glow Tanning Studio", progress: 3 },
    { name: "Fresh Coffee", progress: 7 },
    { name: "Apex Gym", progress: 1 },
    { name: "Bella Boutique", progress: 10 },
  ];

  function goToDashboard() {
    document.getElementById("dashboard-screen").style.display = "block";
    document.getElementById("rewards-section").style.display = "none";
    document.getElementById("redeem-section").style.display = "none";
  }

  function showRewards() {
    document.getElementById("dashboard-screen").style.display = "none";
    document.getElementById("rewards-section").style.display = "block";
    document.getElementById("redeem-section").style.display = "none";
  }

  function showRedeemPage() {
    document.getElementById("rewards-section").style.display = "none";
    document.getElementById("redeem-section").style.display = "block";
  }

  function goBackToRewards() {
    document.getElementById("rewards-section").style.display = "block";
    document.getElementById("redeem-section").style.display = "none";
  }

  const container = document.getElementById("rewards-container");

  rewardsData.forEach((reward) => {
    const percent = (reward.progress / 10) * 100;
    const card = document.createElement("div");
    card.style.marginBottom = "2rem";

    card.innerHTML = `
      <h2 style="font-size: 1.1rem; margin-bottom: 0.5rem;">${reward.name}</h2>
      <div style="position: relative; height: 1px; background: rgba(255,184,77,0.2); border-radius: 9999px; margin-top: 8px;">
        <div style="height: 1px; background: #ffb84d; width: ${percent}%; border-radius: 9999px;"></div>
        <div style="position: absolute; top: -4px; left: calc(${percent}% - 4px); width: 8px; height: 8px; background: #ffb84d; border-radius: 50%;"></div>
        <div style="position: absolute; top: 10px; left: calc(${percent}% - 24px); margin-top: 6px; padding: 2px 8px; font-size: 0.75rem; background-color: rgba(255, 184, 77, 0.15); color: #ffb84d; border-radius: 9999px; text-align: center;">
  ${reward.progress}
</div>

      </div>
      <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: #aaa;"><span>0</span><span>10</span></div>
    `;

    if (reward.progress >= 10) {
      const redeemBtn = document.createElement("button");
      redeemBtn.innerText = "Redeem";
      redeemBtn.style = "margin-top: 0.5rem; background: #ffb84d; color: black; padding: 6px 12px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer;";
      redeemBtn.onclick = showRedeemPage;
      card.appendChild(redeemBtn);
    }

    container.appendChild(card);
  });
</script>


 <style>
  .sort-btn {
    cursor: pointer;
    color: white;
  }
  .sort-btn.active {
    color: #ffb84d;
  }

  <style>
  .nav-bar {
    display: flex;
    justify-content: space-around;
    background-color: #1a2d2f;
    padding: 0.5rem 0;
    border-top: 1px solid #334b4e;
    height: 48px;
  }

  .nav-bar button {
    background: none;
    border: none;
    padding: 0.25rem;
    cursor: pointer;
    transition: transform 0.1s ease, opacity 0.2s ease;
    opacity: 0.6;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .nav-bar button:active {
    transform: scale(0.9);
  }

  .nav-bar button.active {
    opacity: 1;
  }

  .nav-bar svg {
    width: 22px;
    height: 22px;
    stroke: #ffb84d;
    stroke-width: 1.5;
    fill: none;
    opacity: 0.6;
    transition: fill 0.2s, stroke 0.2s, opacity 0.2s;
  }

  .nav-bar button.active svg {
    fill: #ffb84d;
    stroke: none;
    opacity: 1;
  }
</style>

<div id="nav-container" class="nav-bar" style="display: none;">
  <button onclick="setActiveScreen(this, 'directory-screen')" id="nav-directory">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M3 4a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
    </svg>
  </button>

  <button onclick="setActiveScreen(this, 'map-screen')" id="nav-map">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M21 10c0 6-9 12-9 12s-9-6-9-12a9 9 0 0 1 18 0z"/>
      <circle cx="12" cy="10" r="3"/>
    </svg>
  </button>

  <button onclick="setActiveScreen(this, 'offers-screen')" id="nav-offers">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M20.59 13.41l-8-8A2 2 0 0 0 11.17 5H5a2 2 0 0 0-2 2v6.17a2 2 0 0 0 .59 1.42l8 8a2 2 0 0 0 2.83 0l6.17-6.17a2 2 0 0 0 0-2.83z"/>
      <circle cx="7.5" cy="7.5" r="1.5"/>
    </svg>
  </button>

  <button onclick="setActiveScreen(this, 'dashboard-screen')" id="nav-dashboard">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <circle cx="12" cy="8" r="4"/>
      <path d="M6 20v-2a6 6 0 0 1 12 0v2"/>
    </svg>
  </button>
</div>

<script>
  function setActiveScreen(button, screenId) {
    // Hide all screens
    document.querySelectorAll('.screen').forEach(screen => {
      screen.style.display = 'none';
    });

    // Show selected screen
    document.getElementById(screenId).style.display = 'block';

    // Remove 'active' from all buttons
    document.querySelectorAll('.nav-bar button').forEach(btn => {
      btn.classList.remove('active');
    });

    // Add 'active' to clicked button
    button.classList.add('active');
  }

  // Set initial active state (optional)
  // Optional: start on welcome screen
setActiveScreen(null, 'welcome-screen');

</script>



  <script>
   function showScreen(id) {
  const screens = document.querySelectorAll(".screen, .hero-image");
  screens.forEach(screen => screen.style.display = "none");
  const target = document.getElementById(id);
  if (target) target.style.display = "block";

  const nav = document.querySelector(".nav-bar");
  const showNavOn = ["dashboard-screen", "directory-screen", "map-screen", "profile-screen"];
  nav.style.display = showNavOn.includes(id) ? "flex" : "none";
}

  </script>

  <!-- Optional JS enhancements for directory screen -->
<script>
  function handleSearch() {
    const term = document.getElementById("directory-search").value.toLowerCase();
    const cards = document.querySelectorAll(".listing-card");
    let visibleCount = 0;

    cards.forEach(card => {
      const text = card.innerText.toLowerCase();
      const isVisible = text.includes(term);
      card.style.display = isVisible ? "block" : "none";
      if (isVisible) visibleCount++;
    });

    document.getElementById("listing-count").innerText = visibleCount;
  }

  function toggleFilters() {
    alert("Filter feature coming soon!");
  }
</script>

  <script>
  function showRewards() {
    document.getElementById("dashboard-screen").style.display = "none";
    document.getElementById("rewards-section").style.display = "block";
    document.getElementById("redeem-section").style.display = "none";
  }
</script>

<script>
 function showDirectoryFromLogin() {
  document.querySelectorAll('.screen').forEach(screen => screen.style.display = 'none');
  document.getElementById('directory-screen').style.display = 'block';
  document.getElementById('nav-container').style.display = 'flex';

  document.querySelectorAll('.nav-bar button').forEach(btn => btn.classList.remove('active'));
  document.getElementById('nav-directory').classList.add('active');

  initDirectoryScreen(); // ‚Üê this ensures everything is loaded and sorted
  console.log("Rendering retailers sorted by:", currentSort);


}


</script>



  
 </body>
 </html>
